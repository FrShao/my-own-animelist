import { tick } from "svelte";
export function watchChanges(actionFn, params) {
    return function (el, options) {
        let { destroy, update } = actionFn(el, options);
        let observer = new MutationObserver(async (e) => {
            console.log(e);
            observer.disconnect();
            destroy?.();
            ({ destroy, update } = actionFn(el, options));
            await tick();
            observer.observe(el, params);
        });
        observer.observe(el, params);
        return {
            update,
            destroy() {
                observer.disconnect();
                destroy?.();
            },
        };
    };
}
